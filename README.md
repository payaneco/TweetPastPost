# TweetPastPost
自分の過去ツイートを振り返って呟くツール

## これは何

Twitterから公式ダウンロードした過去ログ(`Tweet.js`)を読み取り、過去の同日における最多いいねツイートを取得します。  
Twitter APIを持っていれば黒歴史として疑似RTすることも可能です。  

### 詳しく

Go言語で`Tweet.js`を全件解析し、下記に該当するツイートを定型文に置換してコンソールに表示するコンソールアプリケーションです。  
さらにパラメータファイル(`settings.json`)にTwitter APIを記述してある場合は、パラメータで指定した定型文を置換してツイートします。  
該当するツイートが一つもない場合は「該当なし」とコンソールに出力するだけ終了します。

+ リツイートではなく本人のツイートである
  - 実装できてるはず…(自信なし)
+ アプリケーション実行時と同日のツイートである
  - JSTで判定
+ 上記に該当するツイートの中で最多いいねである
+ 上記に該当するツイートの中で最新である
  - つまりいいねの得票数が同率の場合は新しい方を採用する
+ いいねの得票数がパラメータの設定値以上である

このアプリケーションに**自動ツイート機能はありません**。  
定期的に自動ツイートしたい場合は、別途用意したサーバやクライアントからCronTabなりタスクスケジューラなりで定期実行してください。  
このツールは`Tweet.js`のみを頼りに集計するため、このファイルを更新しないと**刻が止まった状態**で過去を振り返り続けます。  
どこまで最新を反映したいかによりますが、半年に1回くらいの頻度で`Tweet.js`を更新するのが良いのではないでしょうか。

## 使い方(雑)

100億%雑な説明です。  
この説明でダウンロードしてコンパイルして実行できる方のみご利用ください。  
プログラミングのリテラシがない方の利用は正直なところ難しいと思います。  

### Tweet.jsの取得

データ量が多いので月に1回のみ取得できます。  

1. PCのブラウザでTwitterのサイトにログインする
1. 画面左の「もっと見る」をクリック
1. 「設定とプライバシー」をクリック
1. 「アカウント」設定の「データと許可」から「Twitterデータ」をクリック
1. 「Twitterデータをダウンロード」下のパスワードを入力
1. 「確認」をクリック
1. Twitterからデータが準備できたとメールや通知が来るまで数時間待つ。
1. すごく大きいzipファイルを同様の操作で遷移した画面からダウンロード
    - 写真そこそこ画像なしの6700ツイートで900MBくらい
1. zipを展開したフォルダ直下の`Tweet.js`を取得

### Go言語のインストールとコンパイル
### Twitter APIの取得

略

## パラメータ

### oauth.json

ツイートするためのTwitter APIを記述します。  
使いたい方は`oauth_sample.json`をリネームして書き直してください。  
各項目の説明はありません。  
**くれぐれも世界に公開しないよう細心の注意を払ってください**

### settings.json

ツイートするための個人パラメータファイルです。  
公開しても大やけどはしないと思いますが、`Twitter ID`はバレますのでご留意ください。

1. is_tweet
    - `true`にすると`oauth.json`を使ってツイートします。
1. user_id
    - Twitterで個人の@以下に該当するIDです。  
      疑似RTのURLを生成する時に使用します。  
      ご自身のIDに書き換えてください。  
1. min_favos
    - 集計対象とする最小のいいね数です。  
      該当するツイートが存在しない場合は何もしません。
1. message
    - 出力するメッセージのフォーマットです。  
      message置換文字列は置換されます。  
      1行で記述してください。

### message置換文字列

1. `{{year}}`
    - 該当する過去ツイートを呟いた年です。
1. `{{month}}`
    - 該当する過去ツイートを呟いた月です。
1. `{{day}}`
    - 該当する過去ツイートを呟いた日です。
1. `{{favos}}`
    - 該当する過去ツイートのいいね数です。  
      `tweet.js`に記載された数値なので、実行時の正確な値と異なる可能性があります。
1. `{{url}}`
    - 疑似RTのURLです。  
      設定のuser_idを元に`https://twitter.com/gunma_no_yaro/status/1116501392477188098`のような文字列を出力します。
1. `\n`
    - 改行文字です。

## 免責

MITライセンスなので、良識の範囲内でご利用ください。  
利用やフォークして個人情報を公開したことによる不具合や被害は一切保証しません。  
機能追加の要望も受け付けません。
